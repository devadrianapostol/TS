<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <title>Tehnici de simulare</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.highcharts.com/highcharts.js"></script>

    <style>
        .highcharts-figure, .highcharts-data-table table {
            min-width: 360px;
            max-width: 800px;
            margin: 1em auto;
        }

        .highcharts-data-table table {
            font-family: Verdana, sans-serif;
            border-collapse: collapse;
            border: 1px solid #EBEBEB;
            margin: 10px auto;
            text-align: center;
            width: 100%;
            max-width: 500px;
        }
        .highcharts-data-table caption {
            padding: 1em 0;
            font-size: 1.2em;
            color: #555;
        }
        .highcharts-data-table th {
            font-weight: 600;
            padding: 0.5em;
        }
        .highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
            padding: 0.5em;
        }
        .highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
            background: #f8f8f8;
        }
        .highcharts-data-table tr:hover {
            background: #f1f7ff;
        }

    </style>
</head>
<body >
<header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Tehnici de Simulare</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" data-source="normal.html" href="normal.html">Normala(0.2,3)</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-source="poisson.html" href="poisson.html">Poisson</a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="main container" style="min-height: 80%;">

    <div class="mt-4">
        <h3 class="">Normala(0.2,3) prin Th. Limita Centrala</h3>
        <figure class="highcharts-figure">
            <div id="container"></div>
        </figure>
    </div>
    <div>
        Avand Z ~ N(0,1).
        <br>
        X ~ N(mu, sigma) :  X = mu + sigma * Z
    </div>

    <div>Mostrele N(0.2,3) :</div>
    <div id="rezultat">

    </div>
</div>

<footer id="footer" class="footer-1 bg-dark">
    <div class="main-footer text-light">
        <div class="container">
            <div class="row">

                <div class="col-xs-12 col-sm-6 col-md-3">
                    <div class="widget subscribe no-box  text-light">
                        <h5 class="widget-title">Adrian Apostol<span></span></h5>
                    </div>
                </div>

            </div>
        </div>
    </div>
</footer>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

<script>
    $(document).ready(function(){
        let n = 1000;
        let step = 1;
        let max = 10;
        let min = 0;
        let data = {};
        let dataO = {};

        const LimitaCentrala = (mu, sigma) => {
            var rand = 0;
            for (var i = 0; i < 12; i += 1) {
                rand += Math.random();
            }
            // Se calculeaza N(0,1)
            let X = rand - 6;

            // Se calculeaza N(mu, sigma)
            X = mu + ( sigma*X );

            X = X / 10.0 + 0.5; // Translate to 0 -> 1

            X *= max - min; // Stretch to fill range
            X += min; // offset to mi
            return X;
        }

        const round_to_precision = (x, precision) => {
            var y = +x + (precision === undefined ? 0.5 : precision/2);
            return y - (y % (precision === undefined ? 1 : +precision));
        }

        // Seed data with a bunch of 0s
        for (let j=min; j<= max; j+=step) {
            data[j] = 0;
            dataO[j] = 0;
        }

        // Create n samples between min and max
        for (i=0; i<n; i+=step) {
            let rand_num = LimitaCentrala(0.2,3);
            let rounded = round_to_precision(rand_num, step);
            data[rounded] += 1;

            let rand_numO = LimitaCentrala(0,1);
            let roundedO = round_to_precision(rand_numO, step);
            dataO[roundedO] += 1;
        }

        let hc_dataMuSigma = [];
        let hc_dataN01 = [];
        for (const [key, val] of Object.entries(data)) {
            hc_dataMuSigma.push({"x": parseFloat(key), "y": val/n});
        }

        for (const [key, val] of Object.entries(dataO)) {
            hc_dataN01.push({"x": parseFloat(key), "y": val/n});
        }

        // Sort
        hc_dataMuSigma = hc_dataMuSigma.sort(function(a, b){
            if(a.x < b.x) return -1;
            if(a.x > b.x) return 1;
            return 0;
        });
        hc_dataN01 = hc_dataN01.sort(function(a, b){
            if(a.x < b.x) return -1;
            if(a.x > b.x) return 1;
            return 0;
        });

        Highcharts.chart('container', {


            title: {
                text: ''
            },

            yAxis: {
                title: {
                    text: 'Probabilitate'
                }
            },

            xAxis: {
                ordinal: false
            },

            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            plotOptions: {
            },

            series: [{
                name: 'N(0.2,3)',
                data: hc_dataMuSigma,
                color: "rgba(230, 0, 0, 1)"
            },
             {
                 name: 'N(0,1)',
                 data: hc_dataN01,
                 color: "rgba(0, 140, 255, 0.3)"
             }
            ],

            responsive: {
                rules: [{
                    condition: {
                        maxWidth: 500
                    },
                    chartOptions: {
                        legend: {
                            layout: 'horizontal',
                            align: 'center',
                            verticalAlign: 'bottom'
                        }
                    }
                }]
            }

        });

        let dataR = Object.keys(data).map((k) => {
            if(isNaN(data[k])) return "";
            return k + "->" + data[k];
        });

        $("#rezultat").html(dataR.join("<br>"));
    });

</script>
</body>
</html>